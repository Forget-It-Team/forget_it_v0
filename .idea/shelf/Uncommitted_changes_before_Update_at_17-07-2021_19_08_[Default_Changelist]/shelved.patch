Index: app/src/main/java/com/example/android/forget_it_v0/UpcomingRemindersFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.android.forget_it_v0\r\n\r\nimport android.Manifest\r\nimport android.app.Dialog\r\nimport android.content.pm.PackageManager\r\nimport android.graphics.Bitmap\r\nimport android.graphics.BitmapFactory\r\nimport android.os.Build\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.view.*\r\nimport android.widget.Button\r\nimport android.widget.EditText\r\nimport android.widget.RatingBar\r\nimport androidx.annotation.RequiresApi\r\nimport androidx.core.app.ActivityCompat\r\nimport androidx.core.content.ContextCompat\r\nimport androidx.databinding.DataBindingUtil\r\nimport androidx.fragment.app.Fragment\r\nimport androidx.recyclerview.widget.LinearLayoutManager\r\nimport com.example.android.forget_it_v0.adapter.UpcomingAdapter\r\nimport com.example.android.forget_it_v0.databinding.FragmentUpcomingRemindersBinding\r\nimport com.example.android.forget_it_v0.models.*\r\nimport com.example.android.forget_it_v0.repository.FirestoreRepo\r\nimport com.google.firebase.auth.FirebaseAuth\r\nimport com.google.firebase.auth.ktx.auth\r\nimport com.google.firebase.firestore.ktx.firestore\r\nimport com.google.firebase.ktx.Firebase\r\nimport com.google.firebase.messaging.FirebaseMessaging\r\nimport com.synnapps.carouselview.CarouselView\r\nimport kotlinx.coroutines.Dispatchers\r\nimport kotlinx.coroutines.GlobalScope\r\nimport kotlinx.coroutines.launch\r\nimport java.time.LocalDateTime\r\nimport java.time.Month\r\nimport java.time.format.DateTimeFormatter\r\nimport java.util.*\r\nimport java.util.concurrent.TimeUnit\r\n\r\n\r\n@Suppress(\"DEPRECATION\")\r\nclass UpcomingRemindersFragment : Fragment(), RecyclerViewOnClick {\r\n    private var size: Int = 0\r\n    private val PERMISSIONS_REQUEST_READ_CONTACTS = 1\r\n    private var upcomingReminderAdapter = UpcomingAdapter(arrayListOf<Pending>(), this)\r\n    private lateinit var upcomingDialog: Dialog\r\n    private lateinit var deadlineDialog: Dialog\r\n    private lateinit var dialogCompleted: Button\r\n    private lateinit var dialogDelete: Button\r\n    private lateinit var dialogYes: Button\r\n    private lateinit var dialogNo: Button\r\n    private lateinit var satisfy_rate_feedback : String\r\n    private lateinit var goals_problems_feedback : String\r\n    private lateinit var helpful_rate : String\r\n    private lateinit var confused_feedback : String\r\n    private lateinit var features_feedback : String\r\n    private lateinit var recommend_friend_rate_feedback : String\r\n    private lateinit var suggestion_feedback : String\r\n    private lateinit var price_willing : String\r\n    private var list: ArrayList<Pending> = arrayListOf()\r\n    private lateinit  var number: String\r\n    //    private var number : String = \"9307829766\"\r\n    private var auth: FirebaseAuth = Firebase.auth\r\n    private var  phone = auth.currentUser!!.phoneNumber\r\n    var carouselView: CarouselView? = null\r\n\r\n//    var sampleImages = intArrayOf(\r\n//        R.drawable.one,\r\n//        R.drawable.two,\r\n//        R.drawable.three,\r\n//        R.drawable.four,\r\n//        R.drawable.five,\r\n//    )\r\n\r\n    private lateinit var binding: FragmentUpcomingRemindersBinding\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onResume() {\r\n        super.onResume()\r\n\r\n        Log.i(\"AUTH HOME\", auth.currentUser?.phoneNumber.toString())\r\n        binding.progressCircular.visibility = View.GONE\r\n\r\n        size = 0\r\n        list.clear()\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            addToList()\r\n        }\r\n\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            getPending()\r\n        }\r\n    }\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n        binding = DataBindingUtil.inflate(inflater,R.layout.fragment_upcoming_reminders,container,false)\r\n\r\n//        binding.carouselView.pageCount = sampleImages.size\r\n//        binding.carouselView.setImageListener { position, imageView ->\r\n//            imageView.setImageResource(sampleImages[position])}\r\n\r\n        return binding.root\r\n    }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n\r\n        FirebaseMessaging.getInstance().subscribeToTopic(\"all\")\r\n        val sub_phone = phone!!.subSequence(3, 13)\r\n        FirebaseMessaging.getInstance().subscribeToTopic(sub_phone as String)\r\n\r\n\r\n\r\n\r\n        requestContactPermission()\r\n        initView()\r\n        initRV()\r\n        daysInstalled()\r\n\r\n\r\n\r\n    }\r\n    private fun info(){\r\n        val info =  Dialog(requireActivity())\r\n        info.setContentView(R.layout.info)\r\n        info.show()\r\n        val backBtn = info.findViewById<Button>(R.id.backButton)\r\n        backBtn.setOnClickListener{\r\n            info.dismiss()\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private fun daysInstalled() {\r\n        val installed = Date(requireActivity().packageManager.getPackageInfo(requireActivity().packageName, 0).firstInstallTime)\r\n        val localTime = Date(System.currentTimeMillis())\r\n        val diff = localTime.time - installed.time\r\n        val days = TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS)\r\n        if(days >= 1) {\r\n            checkFeedbackData()\r\n        }\r\n        return\r\n    }\r\n    private fun checkFeedbackData(){\r\n        val existingfeedback : ArrayList<String> = arrayListOf()\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            progressShow()\r\n            Firebase.firestore.collection(\"AlreadyFeedback\")\r\n                .get()\r\n                .addOnSuccessListener { data ->\r\n                    for (number in data) {\r\n                        existingfeedback.add(number.getString(\"number\").toString())\r\n                        Log.d(\"feedbacks\", number.getString(\"number\").toString())\r\n                    }\r\n                    if(!(existingfeedback.contains(phone.toString()))){\r\n                        Log.d(\"feedbacks\", \"Yes\")\r\n                        ratingDialog()\r\n                    }\r\n                }\r\n        }\r\n        return\r\n    }\r\n    private fun ratingDialog(){\r\n\r\n        val ask_for_feedback = Dialog(requireActivity())\r\n\r\n        ask_for_feedback.setContentView(R.layout.dialog_rate_your_experience)\r\n\r\n        val rateItNow = ask_for_feedback.findViewById<Button>(R.id.dialog_rate_it_now)\r\n\r\n        val remid_me_later = ask_for_feedback.findViewById<Button>(R.id.dialog_remind_me_later)\r\n\r\n        ask_for_feedback.show()\r\n        ask_for_feedback.setCanceledOnTouchOutside(false)\r\n        ask_for_feedback.setCancelable(false)\r\n\r\n        rateItNow.setOnClickListener {\r\n            satisfy_rate()\r\n            ask_for_feedback.dismiss()\r\n        }\r\n\r\n        remid_me_later.setOnClickListener {\r\n            ask_for_feedback.dismiss()\r\n        }\r\n    }\r\n    private fun satisfy_rate() {\r\n        val satisfy_rate_dialog = Dialog(requireActivity())\r\n        satisfy_rate_dialog.setContentView(R.layout.dialog_satisfy_rating_bar)\r\n        satisfy_rate_dialog.show()\r\n        satisfy_rate_dialog.setCanceledOnTouchOutside(false)\r\n        satisfy_rate_dialog.setCancelable(false)\r\n        val ratingBar = satisfy_rate_dialog.findViewById<RatingBar>(R.id.dialog_satisfy_rating_bar)\r\n        val next_button = satisfy_rate_dialog.findViewById<Button>(R.id.dialog_satify_rating_button_next)\r\n        next_button.setOnClickListener {\r\n            if(!(ratingBar.rating == 0.0f)){\r\n                satisfy_rate_feedback = ratingBar.rating.toString()\r\n                satisfy_rate_dialog.dismiss()\r\n                goals_dialog()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun goals_dialog(){\r\n        val goals_problems_feedback_dialog = Dialog(requireActivity())\r\n        goals_problems_feedback_dialog.setContentView(R.layout.dialog_feedback_goals)\r\n        goals_problems_feedback_dialog.show()\r\n        goals_problems_feedback_dialog.setCanceledOnTouchOutside(false)\r\n        goals_problems_feedback_dialog.setCancelable(false)\r\n        val next_button = goals_problems_feedback_dialog.findViewById<Button>(R.id.dialog_feedback_goal_next)\r\n        val feedBack_goals_problems_text = goals_problems_feedback_dialog.findViewById<EditText>(R.id.dialog_feedback_goal)\r\n        next_button.setOnClickListener {\r\n            if(feedBack_goals_problems_text.text.isEmpty()){\r\n                feedBack_goals_problems_text.error = \"Don't leave field empty\"\r\n            }else{\r\n                goals_problems_feedback = feedBack_goals_problems_text.text.trim().toString()\r\n                goals_problems_feedback_dialog.dismiss()\r\n                helpful_rate()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun helpful_rate() {\r\n        val helpful_rate_dialog = Dialog(requireActivity())\r\n        helpful_rate_dialog.setContentView(R.layout.dialog_solve_problem_rating_bar)\r\n        helpful_rate_dialog.show()\r\n        helpful_rate_dialog.setCanceledOnTouchOutside(false)\r\n        helpful_rate_dialog.setCancelable(false)\r\n        val ratingBar = helpful_rate_dialog.findViewById<RatingBar>(R.id.dialog_help_solve_problems_rating_bar)\r\n        val next_button = helpful_rate_dialog.findViewById<Button>(R.id.dialog_satify_rating_button_next)\r\n        next_button.setOnClickListener {\r\n            if(!(ratingBar.rating == 0.0f)){\r\n                helpful_rate = ratingBar.rating.toString()\r\n                helpful_rate_dialog.dismiss()\r\n                confused_feedback_dialog()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun confused_feedback_dialog(){\r\n        val confused_feedback_dialog = Dialog(requireActivity())\r\n        confused_feedback_dialog.setContentView(R.layout.dialog_feedback_confused)\r\n        confused_feedback_dialog.show()\r\n        confused_feedback_dialog.setCanceledOnTouchOutside(false)\r\n        confused_feedback_dialog.setCancelable(false)\r\n        val next_button = confused_feedback_dialog.findViewById<Button>(R.id.dialog_feedback_goal_next)\r\n        val feedback_confused_text = confused_feedback_dialog.findViewById<EditText>(R.id.dialog_feedback_confused_text)\r\n        next_button.setOnClickListener {\r\n            if(feedback_confused_text.text.isEmpty()){\r\n                feedback_confused_text.error = \"Don't leave field empty\"\r\n            }else{\r\n                confused_feedback = feedback_confused_text.text.trim().toString()\r\n                confused_feedback_dialog.dismiss()\r\n                add_features_feedback_dialog()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private fun add_features_feedback_dialog(){\r\n        val add_features_feedback_dialog = Dialog(requireActivity())\r\n        add_features_feedback_dialog.setContentView(R.layout.dialog_feedback_features)\r\n        add_features_feedback_dialog.show()\r\n        add_features_feedback_dialog.setCanceledOnTouchOutside(false)\r\n        add_features_feedback_dialog.setCancelable(false)\r\n        val next_button = add_features_feedback_dialog.findViewById<Button>(R.id.dialog_feedback_goal_next)\r\n        val feedback_confused_text = add_features_feedback_dialog.findViewById<EditText>(R.id.dialog_feedback_features)\r\n        next_button.setOnClickListener {\r\n            if(feedback_confused_text.text.isEmpty()){\r\n                feedback_confused_text.error = \"Don't leave field empty\"\r\n            }else{\r\n                features_feedback = feedback_confused_text.text.trim().toString()\r\n                add_features_feedback_dialog.dismiss()\r\n                willing_pay_feedback_dialog()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun willing_pay_feedback_dialog(){\r\n        val willing_pay_feedback_dialog = Dialog(requireActivity())\r\n        willing_pay_feedback_dialog.setContentView(R.layout.dialog_feedback_willing_pay)\r\n        willing_pay_feedback_dialog.show()\r\n        willing_pay_feedback_dialog.setCanceledOnTouchOutside(false)\r\n        willing_pay_feedback_dialog.setCancelable(false)\r\n        val yes = willing_pay_feedback_dialog.findViewById<Button>(R.id.price_willing1)\r\n        val no = willing_pay_feedback_dialog.findViewById<Button>(R.id.price_willing2)\r\n        yes.setOnClickListener {\r\n            price_willing = \"Yes\"\r\n            willing_pay_feedback_dialog.dismiss()\r\n            recommend_friends_rate()\r\n        }\r\n        no.setOnClickListener {\r\n            price_willing = \"No\"\r\n            willing_pay_feedback_dialog.dismiss()\r\n            recommend_friends_rate()\r\n        }\r\n    }\r\n\r\n\r\n    private fun recommend_friends_rate() {\r\n        val satisfy_rate_dialog = Dialog(requireActivity())\r\n        satisfy_rate_dialog.setContentView(R.layout.dialog_feedback_recommend_friend)\r\n        satisfy_rate_dialog.show()\r\n        satisfy_rate_dialog.setCanceledOnTouchOutside(false)\r\n        satisfy_rate_dialog.setCancelable(false)\r\n        val ratingBar = satisfy_rate_dialog.findViewById<RatingBar>(R.id.dialog_satisfy_rating_bar)\r\n        val next_button = satisfy_rate_dialog.findViewById<Button>(R.id.dialog_recommend_rating_button_next)\r\n        next_button.setOnClickListener {\r\n            if(!(ratingBar.rating == 0.0f)){\r\n                recommend_friend_rate_feedback = ratingBar.rating.toString()\r\n                satisfy_rate_dialog.dismiss()\r\n                additional_suggestion_feedback()\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun additional_suggestion_feedback() {\r\n        val dditional_suggestion_feedback_dialog = Dialog(requireActivity())\r\n        dditional_suggestion_feedback_dialog.setContentView(R.layout.dialog_feedback_additional_suggestion)\r\n        dditional_suggestion_feedback_dialog.show()\r\n        dditional_suggestion_feedback_dialog.setCanceledOnTouchOutside(false)\r\n        dditional_suggestion_feedback_dialog.setCancelable(false)\r\n        val next_button = dditional_suggestion_feedback_dialog.findViewById<Button>(R.id.dialog_feedback_goal_next)\r\n        val feedback_confused_text = dditional_suggestion_feedback_dialog.findViewById<EditText>(R.id.dialog_feedback_suggestion)\r\n        next_button.setOnClickListener {\r\n            if(feedback_confused_text.text.isEmpty()){\r\n                feedback_confused_text.error = \"Don't leave field empty\"\r\n            }else{\r\n                suggestion_feedback = feedback_confused_text.text.trim().toString()\r\n                dditional_suggestion_feedback_dialog.dismiss()\r\n                addFeedback()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private fun addFeedback(){\r\n        val feedbackModel = Feedback_Model(\r\n            phone.toString(),\r\n            satisfy_rate_feedback,\r\n            goals_problems_feedback,\r\n            helpful_rate,\r\n            confused_feedback,\r\n            features_feedback,\r\n            price_willing,\r\n            recommend_friend_rate_feedback,\r\n            suggestion_feedback\r\n        )\r\n        val user = hashMapOf(\r\n            \"number\" to phone\r\n        )\r\n        progressShow()\r\n        Firebase.firestore.collection(\"AlreadyFeedback\").add(user)\r\n        Firebase.firestore.collection(\"Feedback\").document(phone.toString()).set(feedbackModel)\r\n        progressHide()\r\n        requireActivity().toast(\"Your feedback is recorded\")\r\n    }\r\n    private fun getPending() {\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            val firestoreRV = Firebase.firestore.collection(number).document(\"Upcoming\")\r\n                .collection(\"Pending\")\r\n\r\n            progressShow()\r\n\r\n            firestoreRV\r\n                .orderBy(\"date\")\r\n                .get()\r\n                .addOnSuccessListener { reminders ->\r\n                    for (reminder in reminders)\r\n                        size++\r\n\r\n                    progressHide()\r\n                    Log.i(\"SIze IN\", size.toString())\r\n                    initBadge()\r\n                }\r\n        }\r\n    }\r\n\r\n    private fun initView() {\r\n        number = requireActivity().intent.getStringExtra(\"number\").toString()\r\n\r\n        upcomingDialog = Dialog(requireActivity())\r\n        deadlineDialog = Dialog(requireActivity())\r\n        upcomingDialog.setContentView(R.layout.dialog_upcoming_reminders)\r\n        deadlineDialog.setContentView(R.layout.dialog_upcoming_deadline)\r\n\r\n        dialogCompleted = upcomingDialog.findViewById(R.id.upcoming_dialog_completed)\r\n        dialogDelete = upcomingDialog.findViewById(R.id.upcoming_dialog_delete)\r\n        dialogYes = deadlineDialog.findViewById(R.id.deadline_dialog_yes)\r\n        dialogNo = deadlineDialog.findViewById(R.id.deadline_dialog_no)\r\n\r\n        upcomingDialog.dismiss()\r\n        deadlineDialog.dismiss()\r\n    }\r\n\r\n    private fun initBadge() {\r\n//        Log.i(\"SIze out\", size.toString())\r\n//        val unread: String = size.toString()\r\n//\r\n//        when {\r\n//            size == 0 -> activity_home_pending_image_badge_tv.visibility = View.GONE\r\n//            size > 9 -> {\r\n//                activity_home_pending_image_badge_tv.visibility = View.VISIBLE\r\n//                activity_home_pending_image_badge_tv.text = \" 9+\"\r\n//            }\r\n//            else -> {\r\n//                activity_home_pending_image_badge_tv.visibility = View.VISIBLE\r\n//                activity_home_pending_image_badge_tv.text = \" $unread \"\r\n//            }\r\n//        }\r\n    }\r\n\r\n    private fun initRV() {\r\n        binding.upcomingRv.layoutManager = LinearLayoutManager(requireContext())\r\n        binding.upcomingRv.adapter = upcomingReminderAdapter\r\n    }\r\n\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    private fun addToList() {\r\n\r\n        var photo: Bitmap = BitmapFactory.decodeResource(\r\n            requireActivity().resources,\r\n            R.drawable.person\r\n        )\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            val firestoreRV = Firebase.firestore.collection(number).document(\"Upcoming\")\r\n                .collection(\"Accepted\")\r\n\r\n            val formatter: DateTimeFormatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\")\r\n\r\n            progressShow()\r\n            firestoreRV\r\n                .orderBy(\"date\")\r\n                .get()\r\n                .addOnSuccessListener { reminders ->\r\n                    for (reminder in reminders) {\r\n                        val pending = Pending(\r\n                            \"\",\r\n                            \"\",\r\n                            \"\",\r\n                            LocalDateTime.of(2001, Month.JULY, 29, 10, 10),\r\n                            photo,\r\n                            reminder.id\r\n                        )\r\n\r\n\r\n                        pending.from = reminder.getString(\"from\").toString()\r\n                        pending.task = reminder.getString(\"reminder\").toString()\r\n                        pending.name = reminder.getString(\"name\").toString()\r\n\r\n                        val time: LocalDateTime =\r\n                            LocalDateTime.parse(reminder.getString(\"date\").toString(), formatter)\r\n\r\n                        pending.date = time\r\n                        pending.image = photo\r\n\r\n                        if (pending.date.isBefore(LocalDateTime.now()))\r\n                            pending.pastDeadline = true\r\n\r\n                        list.add(pending)\r\n\r\n                    }\r\n                    upcomingReminderAdapter.updateList(list)\r\n                    progressHide()\r\n                }\r\n        }\r\n    }\r\n\r\n    private fun requestContactPermission() {\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n                if (ContextCompat.checkSelfPermission(\r\n                        requireContext(),\r\n                        Manifest.permission.READ_CONTACTS\r\n                    ) != PackageManager.PERMISSION_GRANTED\r\n                ) {\r\n                    if (ActivityCompat.shouldShowRequestPermissionRationale(\r\n                            requireActivity(),\r\n                            Manifest.permission.READ_CONTACTS\r\n                        )\r\n                    ) {\r\n                        val builder: android.app.AlertDialog.Builder =\r\n                            android.app.AlertDialog.Builder(requireContext())\r\n                        builder.setTitle(\"Read Contacts permission\")\r\n                        builder.setPositiveButton(android.R.string.ok, null)\r\n                        builder.setMessage(\"Please enable access to contacts.\")\r\n                        builder.setOnDismissListener {\r\n                            requestPermissions(\r\n                                arrayOf(Manifest.permission.READ_CONTACTS),\r\n                                PERMISSIONS_REQUEST_READ_CONTACTS\r\n                            )\r\n                        }\r\n                        builder.show()\r\n                    } else {\r\n                        ActivityCompat.requestPermissions(\r\n                            requireActivity(), arrayOf(Manifest.permission.READ_CONTACTS),\r\n                            PERMISSIONS_REQUEST_READ_CONTACTS\r\n                        )\r\n                    }\r\n                } else {\r\n//                    home_constraint.visibility = View.VISIBLE\r\n//                    home_warning.visibility = View.GONE\r\n//                    home_rv.visibility = View.VISIBLE\r\n//                    home_upcoming_text.visibility = View.VISIBLE\r\n                }\r\n            } else {\r\n                requireActivity().toast(\"Permission to read contacts has been granted\")\r\n//                home_constraint.visibility = View.VISIBLE\r\n//                home_warning.visibility = View.GONE\r\n//                home_rv.visibility = View.VISIBLE\r\n//                home_upcoming_text.visibility = View.VISIBLE\r\n            }\r\n        }\r\n    }\r\n\r\n    override fun onRequestPermissionsResult(\r\n        requestCode: Int,\r\n        permissions: Array<out String>,\r\n        grantResults: IntArray\r\n    ) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n        GlobalScope.launch(Dispatchers.Main) {\r\n            when (requestCode) {\r\n                PERMISSIONS_REQUEST_READ_CONTACTS -> {\r\n                    if (grantResults.isNotEmpty()\r\n                        && grantResults[0] == PackageManager.PERMISSION_GRANTED\r\n                    ) {\r\n//                        home_constraint.visibility = View.VISIBLE\r\n//                        home_warning.visibility = View.GONE\r\n//                        home_rv.visibility = View.VISIBLE\r\n//                        home_upcoming_text.visibility = View.VISIBLE\r\n                    } else {\r\n                        requireContext().toast(\"Please do not deny, otherwise you won't be able to use the app and connect with your friends\")\r\n//                        home_constraint.visibility = View.GONE\r\n//                        home_warning.visibility = View.VISIBLE\r\n//                        home_rv.visibility = View.GONE\r\n//                        home_upcoming_text.visibility = View.GONE\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    override fun onClick(v: View, pending: Pending) {\r\n        if (pending.pastDeadline) {\r\n            if(v.id == R.id.rv_markDone) {\r\n                onYes(pending)\r\n            }else {\r\n                onNo(pending)\r\n            }\r\n        } else {\r\n            if(v.id == R.id.rv_markDone) {\r\n                onCompleted(pending)\r\n            }else {\r\n                onDelete(pending)\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun onYes(pending: Pending) {\r\n        progressShow()\r\n        FirestoreRepo.swapData(\"Accepted\", \"Completed\", pending.from, number, pending)\r\n        if(AudioPlayer.isPlaying()) {\r\n            AudioPlayer.stopAudio()\r\n        }\r\n        progressHide()\r\n        requireActivity().toast(\"You have completed this reminder. Congrats!\")\r\n\r\n        list.remove(pending)\r\n        upcomingReminderAdapter.updateList(list)\r\n        deadlineDialog.dismiss()\r\n    }\r\n\r\n    private fun onNo(pending: Pending) {\r\n        progressShow()\r\n        FirestoreRepo.swapData(\"Accepted\", \"Incomplete\", pending.from, number, pending)\r\n        progressHide()\r\n        if(AudioPlayer.isPlaying()) {\r\n            AudioPlayer.stopAudio()\r\n        }\r\n        requireActivity().toast(\"You have not completed this task. Better luck next time!\")\r\n\r\n        list.remove(pending)\r\n        upcomingReminderAdapter.updateList(list)\r\n        deadlineDialog.dismiss()\r\n    }\r\n\r\n    private fun onDelete(pending: Pending) {\r\n        progressShow()\r\n        FirestoreRepo.swapData(\"Accepted\", \"Deleted\", pending.from, number, pending)\r\n        progressHide()\r\n\r\n        requireActivity().toast(\"You have deleted this task. Better luck next time!\")\r\n\r\n        list.remove(pending)\r\n        upcomingReminderAdapter.updateList(list)\r\n        upcomingDialog.dismiss()\r\n    }\r\n\r\n    private fun onCompleted(pending: Pending) {\r\n        progressShow()\r\n        FirestoreRepo.swapData(\"Accepted\", \"Completed\", pending.from, number, pending)\r\n        progressHide()\r\n\r\n        requireActivity().toast(\"You have completed this task. Well done!\")\r\n\r\n        list.remove(pending)\r\n        upcomingReminderAdapter.updateList(list)\r\n        upcomingDialog.dismiss()\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    private fun progressShow() {\r\n        binding.progressCircular.visibility = View.VISIBLE\r\n        requireActivity().window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,\r\n            WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE\r\n        )\r\n    }\r\n\r\n    private fun progressHide() {\r\n        binding.progressCircular.visibility = View.GONE\r\n        requireActivity().window.clearFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE)\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/android/forget_it_v0/UpcomingRemindersFragment.kt	(revision e91ba3306bd80aa476821273749da28e7b45653a)
+++ app/src/main/java/com/example/android/forget_it_v0/UpcomingRemindersFragment.kt	(date 1626529127929)
@@ -126,6 +126,7 @@
     private fun info(){
         val info =  Dialog(requireActivity())
         info.setContentView(R.layout.info)
+        
         info.show()
         val backBtn = info.findViewById<Button>(R.id.backButton)
         backBtn.setOnClickListener{
